12. Nested Routes with Outlet
13. Fetching Data via Nested Routes
14. Relative and Absolute Navigation
15. Dynamic Routes
16. Accessing Route Params
17. Fetching Data with Route Params
18. Implementing Programmatic Navigation
19. Passing State along Navigation
20. Navigation Deltas Concepts
21. Domain-Driven Routes
22. Restricting Access to Routes

# ----------------------- 12. Nested Routes with Outlet ---------------------- #
âœ… 1. to create a nested routes we have to wrap the child routes into a parent route.
ðŸš©ðŸš©ðŸš©ðŸš©
    <Route path="/" element={<Books/>}>
        <Route path="/books" element={<BookList/>} />
    </Route>
âš¡âš¡âš¡âš¡


âœ… 2. after this step we have to add the outlet component in the parent 'Route' that is <Books/> component.
âœ… 3. we need to import the 'outlet' from react-router-dom in the parent component.
ðŸš©ðŸš©ðŸš©ðŸš©
    import {Outlet} from "react-router-dom";
âš¡âš¡âš¡âš¡


âœ… 4. add this <Outlet/> component in your desired place where you want to render your child-component/nested-component.
âœ… 5. you can have many child routes with different path names and the outlet will render the exact element the path match.

# -------------------- 13. Fetching Data via Nested Routes ------------------- #
âœ… 1. with the help of axios we can get the books data from the server using 'get' method.
âœ… 2. in the BookList component we can use "useState" and "useEffect" to get data from the server and set it in the useState variable using the below code.
ðŸš©ðŸš©ðŸš©ðŸš©
        const [data, setData] = useState(null);

        useEffect(() => {
            (
                async () => {
                    const response = await axios.get("/books");
                    setData(response.data);
                }
            )();
        });   
âš¡âš¡âš¡âš¡


âœ… 3. also we can conditionally render the data.
âœ… 4. if 'data' is 'null' then render loading spinner.
âœ… 5. if 'data'  persists then render the books data.
âœ… 6. if any error occured in fetching display the error page.

# ------------------- 14. Relative and Absolute Navigation ------------------- #
âœ… 1. create a diicated card component <BookCard/> for the book and use map method to display all the books inside the <BookList/> component.
âœ… 2. inside the div you need to wrap all the text and the book image inside the 'Link' tag, because it will help to navigate to a new page when we click on the book component.
âœ… 3. Realative path -> localhost:3000/books/book_name
âœ… 4. Absolute path  -> localhost:3000/book_name
âœ… 5. the main difference between them is the end 'url' is followed by the parent url.
âœ… 6. Relative path is achived using the below code.
ðŸš©ðŸš©ðŸš©ðŸš©
    <Link to={books.id} />
âš¡âš¡âš¡âš¡


âœ… 6. Absolute path is achived using the backticks in the below code.
ðŸš©ðŸš©ðŸš©ðŸš©
    <Link to={`/${books.id}`} />
âš¡âš¡âš¡âš¡


âœ… 7. Relative path is quite a meaningfull way and can be understand using the url name.
âœ… 8. import thing is this 'to' attribute is added to the 'Link' tag inside the <BookCard/> component.

# ---------------------------- 15. Dynamic Routes ---------------------------- #
âœ… 1. now need a specific url which help render the <Book/> component.
âœ… 2. this <Book/> component has the data of a single book which we clicked.
âœ… 3. we can add a additional route for this book component to render.
ðŸš©ðŸš©ðŸš©ðŸš©
    <Route path="/" element={<Books/>}>
        <Route path="/books" element={<BookList/>} />
        <Route path=":id" element={<Book/>} />
    </Route>
âš¡âš¡âš¡âš¡


âœ… 4. this is called Dynamic route or Dynamic url.
âœ… 5. because ":id" comes from the <BookCard/> component when we click it.
âœ… 6. and it matches the all the routes we have.
âœ… 7. if it dont match it will render the wildcard component.
âœ… 8. that is why we add the ":id" path and render the <Book/> component.

# ------------------------ 16. Accessing Route Params ------------------------ #
âœ… 1. in react v6, there is a hook which is used to grab the parameters from the Routes or Dynamic Routes.
âœ… 2. in the below example url the ":id" which is 'delter' can be grabed using this hook.
ðŸš©ðŸš©ðŸš©ðŸš©
    localhost:3000/delter
âš¡âš¡âš¡âš¡


âœ… 3.this will be very helpfull when we click a book card component and it will open a new page with the full details of that particular book.
âœ… 4. and that hook name is 'useParams' and we need to import it from 'react-router-dom'.
ðŸš©ðŸš©ðŸš©ðŸš©
    import {useParams} from "react-router-dom";
âš¡âš¡âš¡âš¡


âœ… 5. we can use this hook inside our <Book/> component and console log it to view it.
ðŸš©ðŸš©ðŸš©ðŸš©
    const params = useParams();      //method 1
    console.log(params);             //output: { id:'delter' }

    const { id } = useParams();      //method 2 [we destructure it, if we know the name]
    console.log(id);                 //output:delter
âš¡âš¡âš¡âš¡


âœ… 6. this 'id' comes from the url.

# -------------------- 17. Fetching Data with Route Params ------------------- #
âœ… 1. after getting the book name using the use params, we can use axios to fetch the book data from the server.
âœ… 2. we can use the below code to get the book data.
ðŸš©ðŸš©ðŸš©ðŸš©
    useEffect(() =>{
        (async () => {
            const response = await axios.get(`/books/${id}`);
            setBook(response.data);
        })();
    }, [is]);
âš¡âš¡âš¡âš¡


âœ… 3. remember always console the response and verify the data comes from the server and set the book data in the useState.
âœ… 4. we need to run this useEffect whenever the id changes.

# ----------------- 18. Implementing Programmatic Navigation ----------------- #
âœ… 1. when we manually type the book name in the url it will fetch the book from the server.
âœ… 2. but in case there is no such book availabe in the server, then react dont know about this issue.
âœ… 3. so for that problem always use "try/catch" block in the useEffect while fetching data from the server.
ðŸš©ðŸš©ðŸš©ðŸš©
    useEffect(() =>{
        (async () => {
            try{
            const response = await axios.get(`/books/${id}`);
            setBook(response.data);
            } catch (e) {
                console.warn(e);
            }
        })();
    }, [is]);
âš¡âš¡âš¡âš¡


âœ… 4. if we use this 'try/catch' block then react will complain about the error that bad request/book not availabe in the server.
âœ… 5. at that time we can move the page to home page or any other page Programmatically using a hook called 'useNavigate'.
âœ… 6. to use 'useNavigate' we need to import from the react-route-dom.
ðŸš©ðŸš©ðŸš©ðŸš©
    import {useNavigate} from "react-router-dom";
âš¡âš¡âš¡âš¡


âœ… 7. using the below code you can add it inside the component and use it to jump to a new page Programmatically.
ðŸš©ðŸš©ðŸš©ðŸš©
    const navigate = useNavigate();
    useEffect(() =>{
        (async () => {
            try{
            const response = await axios.get(`/books/${id}`);
            setBook(response.data);
            } catch (e) {
                console.warn(e);
                navigate('/');
            }
        })();
    }, [is]);
âš¡âš¡âš¡âš¡

# -------------------- 19. Passing State along Navigation -------------------- #
âœ… 1. we can pass props along with the navigation when using useNavigate hook.
âœ… 2. when passing the state we can send any number of state.
ðŸš©ðŸš©ðŸš©ðŸš©
    navigate('/', {state: {id}});
âš¡âš¡âš¡âš¡


âœ… 3. here we pass 'id' state.
âœ… 4. this state can be captured in the receving component using "useLocation" hook which can be imported from the react-router-dom.
ðŸš©ðŸš©ðŸš©ðŸš©
    import {useLocation} from "react-router-dom";
âš¡âš¡âš¡âš¡


âœ… 5. after importing use the below code in the receving component.
ðŸš©ðŸš©ðŸš©ðŸš©
    const location = useLocation();
âš¡âš¡âš¡âš¡

âœ… 6. console the 'location' and see the detailed data of the 'location'.
ðŸš©ðŸš©ðŸš©ðŸš©
    console.log(location);
âš¡âš¡âš¡âš¡

âœ… 7. inside this 'location' we need just the state value so we can destruct it.
ðŸš©ðŸš©ðŸš©ðŸš©
    const {state} = useLocation();
âš¡âš¡âš¡âš¡

âœ… 8. this method of passing state is very helpful when users manually type the url and search, and if the link dont match we can redirect to the home page and pass a error message saying the url/book you are accessing dont exists.
âœ… 9. we can log it in the console panel or as a pop up message in our browser.

# ---------------------- 20. Navigation Deltas Concepts ---------------------- #
âœ… 1. when we use navigation, we can use a string or a number to navigate to the particular path.
âœ… 2. string can be quite easy because we can directly mention the path we need to redirect.
âœ… 3. also we can use numbers to navigate, it going to redirect to the history of the browser.
âœ… 4. for example if we use "-1" it will move back to one step in the history of your browser.
âœ… 5. this feature is very helpful when we use a button to go back to the previous page.
âœ… 6. the process is to create a button, make a handler function for that button, use the below code inside the handler function.
ðŸš©ðŸš©ðŸš©ðŸš©
    navigate(-1);
âš¡âš¡âš¡âš¡

âœ… 7. this number "-1" is called navigation delta in react-router-dom.

# ------------------------- 21. Domain-Driven Routes ------------------------- #
âœ… 1. while using nested route in the app component, our code will look good and if the number of pages and nested routes increases then it will be tedious to understand.
âœ… 2. so react-router-dom v6 allows to move the nested route code to the parent component, and mark the path of the parent component with a wildcard symbol "*" in the main app component as below.
ðŸš©ðŸš©ðŸš©ðŸš©
    <Routes>
        <Route path='/*' element={<Books/>} />
        <Route path='/admin' element={<Admin/>} />
        <Route path='*' element={<ErrorPage/>} />
    </Routes>
âš¡âš¡âš¡âš¡


âœ… 3. this concept is called Domain Driven Routes beacuse all the nested route are driven under the path "/*" and its code can be moved to that path component.
âœ… 4. in the parent element use the code as below.
ðŸš©ðŸš©ðŸš©ðŸš©
    const Books = () => {
        return (
            <>
               <BooksContainer>
                    <Logo/>
                    <Outlet/>
                    <Routes>
                        <Route path='/' element={<BookList/>} />
                        <Route path=':id' element={<Book/>} />
                    </Routes>
               </BooksContainer>
            </>
        )
    } 
âš¡âš¡âš¡âš¡

âœ… 5. in this method just add the routes, just cut/paste.
âœ… 6. this reduces code in the app component.

# --------------------- 22. Restricting Access to Routes --------------------- #
âœ… 1. giving Access to the user to render component based on the auth data.
âœ… 2. in the below code the admin path can be accesed by manually typing the url path.
ðŸš©ðŸš©ðŸš©ðŸš©
    <Route path='/admin' element={<Admin/>} />
âš¡âš¡âš¡âš¡

âœ… 3. in real world case this is not good, since the page should not be accesed in any methods.
âœ… 4. to overcome this issue we can render a separate component for "/admin" path and pass the auth data and check wether the user has the admin access.
âœ… 5. based on the data we can render the "<Admin/>" component.
âœ… 6. create a file named  "ProtectedRoute.jsx" and write the below condition in it.
ðŸš©ðŸš©ðŸš©ðŸš©
    const ProtectedRoute = ({ to, auth, element }) => {
        if(!auth) return <Navigate to={to} />;
        return(
            <Routes>
                <Route path='/' element={element}/>
            </Routes>
        )
    }
âš¡âš¡âš¡âš¡

âœ… 7. by this method we can restrict the access from the public users like admin in here.
âœ… 8. instead of directly rendering the admin component we conditionally check the auth data and render if true else redirect to the home page using the <Navigate/> of the react-router-dom.
ðŸš©ðŸš©ðŸš©ðŸš©
    <Route path='/admin' element={<Admin/>} />

    <Route 
        path='/admin' 
        element={<ProtectedRoute to='/' auth={auth} element={<Admin/>} />} />
âš¡âš¡âš¡âš¡
